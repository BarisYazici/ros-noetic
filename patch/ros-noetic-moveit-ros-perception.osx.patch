diff --git a/moveit_ros/perception/mesh_filter/src/gl_renderer.cpp b/moveit_ros/perception/mesh_filter/src/gl_renderer.cpp
index 4f351b53e..41809a0e3 100644
--- a/moveit_ros/perception/mesh_filter/src/gl_renderer.cpp
+++ b/moveit_ros/perception/mesh_filter/src/gl_renderer.cpp
@@ -37,11 +37,13 @@
 #include <GL/glew.h>
 #ifdef __APPLE__
 #include <OpenGL/glu.h>
+#include <OpenGL/gl.h>
+#include <GLUT/glut.h>
 #else
 #include <GL/glu.h>
-#endif
 #include <GL/glut.h>
 #include <GL/freeglut.h>
+#endif
 #include <moveit/mesh_filter/gl_renderer.h>
 #include <sstream>
 #include <fstream>
@@ -400,8 +402,13 @@ void mesh_filter::GLRenderer::createGLContext()
     glutHideWindow();
 
     for (int i = 0; i < 10; ++i)
+    {
+#ifdef __APPLE__
+      glutCheckLoop();
+#else
       glutMainLoopEvent();
-
+#endif
+    }
     context_[thread_id] = std::pair<unsigned, GLuint>(1, window_id);
   }
   else
